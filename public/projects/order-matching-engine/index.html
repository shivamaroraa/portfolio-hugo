<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Order Matching Engine | Shivam Arora</title>
<meta name="keywords" content="Go, MySQL">
<meta name="description" content="Ultra fast order matching engine written in Go">
<meta name="author" content="Shivam Arora">
<link rel="canonical" href="https://shiva-m.com/projects/order-matching-engine/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a1f0eda2eb9f1e1e4e7a32fdb53c5b32f0d31b07dc7d9d97ec56e2beef740e8f.css" integrity="sha256-ofDtouufHh5OejL9tTxbMvDTGwfcfZ2X7Fbivu90Do8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://shiva-m.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://shiva-m.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://shiva-m.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://shiva-m.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://shiva-m.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Order Matching Engine" />
<meta property="og:description" content="Ultra fast order matching engine written in Go" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shiva-m.com/projects/order-matching-engine/" /><meta property="article:section" content="projects" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Order Matching Engine"/>
<meta name="twitter:description" content="Ultra fast order matching engine written in Go"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Projects",
      "item": "https://shiva-m.com/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Order Matching Engine",
      "item": "https://shiva-m.com/projects/order-matching-engine/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Order Matching Engine",
  "name": "Order Matching Engine",
  "description": "Ultra fast order matching engine written in Go",
  "keywords": [
    "Go", "MySQL"
  ],
  "articleBody": "Order Matching Engine (Golang) A high-performance order matching engine developed in Golang, tailored for trading systems. This engine ensures rapid pairing of buy and sell orders, with an efficiency rate of approximately 16,000 orders per second.\nSystem Design and Features: Database Initialization: Utilizes the github.com/go-sql-driver/mysql package for MySQL integration. Efficiently establishes a connection with the MySQL database. Data Structures and Models: Order: A comprehensive model representing trade orders with attributes such as order ID, price, quantity, timestamp, user ID, and instrument identifier (BitName). TradeDetails: A model capturing the intricate details of completed trades, including trade timestamps, executed price, buyer and seller details, and calculated brokerage. Concurrency and Order Processing: Incorporates Golang’s goroutines and the sync package to achieve concurrent fetching of optimal buy and sell orders, maximizing throughput. Executes multiple iterations of the order matching loop until either buy or sell orders are exhausted or the price criteria aren’t met. Order Matching Logic: Uses price and timestamp as primary criteria for matching. Matching Scenarios: Equal Quantities: Both the buy and sell orders are removed from their respective books. Buy Quantity Exceeds: The sell order is culled, while the buy order undergoes a proportional reduction. Sell Quantity Exceeds: The buy order is culled, while the sell order undergoes a proportional reduction. Database Operations and Transaction Management: The engine employs SQL transactions to ensure atomicity and data integrity. On successful order match, trade details are persisted into a MASTER_LEDGER. Efficient rollback mechanisms are in place to counteract any anomalies or discrepancies during transaction execution. Error Handling: Implements a robust error logging mechanism, providing insights into database connection issues, CRUD operations, and transactional discrepancies. Performance Metrics: At the culmination of its run, the engine delivers a performance report, showcasing the total elapsed time, rate of order processing (highlighting its capability of processing approximately 16,000 orders per second), and total iterations executed. ",
  "wordCount" : "308",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Shivam Arora"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://shiva-m.com/projects/order-matching-engine/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Shivam Arora",
    "logo": {
      "@type": "ImageObject",
      "url": "https://shiva-m.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://shiva-m.com/" accesskey="h" title="Shivam Arora (Alt + H)">Shivam Arora</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://shiva-m.com/experience" title="Experience">
                    <span>Experience</span>
                </a>
            </li>
            <li>
                <a href="https://shiva-m.com/education" title="Education">
                    <span>Education</span>
                </a>
            </li>
            <li>
                <a href="https://shiva-m.com/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://shiva-m.com/tags" title="Skills">
                    <span>Skills</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://shiva-m.com/">Home</a>&nbsp;»&nbsp;<a href="https://shiva-m.com/projects/">Projects</a></div>
    <h1 class="post-title">
      Order Matching Engine
    </h1>
    <div class="post-meta">Shivam Arora

</div>
  </header> 
  <div class="post-content"><h1 id="order-matching-engine-golang">Order Matching Engine (Golang)<a hidden class="anchor" aria-hidden="true" href="#order-matching-engine-golang">#</a></h1>
<p>A high-performance order matching engine developed in Golang, tailored for trading systems. This engine ensures rapid pairing of buy and sell orders, with an efficiency rate of approximately 16,000 orders per second.</p>
<h2 id="system-design-and-features"><strong>System Design and Features</strong>:<a hidden class="anchor" aria-hidden="true" href="#system-design-and-features">#</a></h2>
<h3 id="database-initialization"><strong>Database Initialization</strong>:<a hidden class="anchor" aria-hidden="true" href="#database-initialization">#</a></h3>
<ul>
<li>Utilizes the <code>github.com/go-sql-driver/mysql</code> package for MySQL integration.</li>
<li>Efficiently establishes a connection with the MySQL database.</li>
</ul>
<h3 id="data-structures-and-models"><strong>Data Structures and Models</strong>:<a hidden class="anchor" aria-hidden="true" href="#data-structures-and-models">#</a></h3>
<ul>
<li><strong>Order</strong>: A comprehensive model representing trade orders with attributes such as order ID, price, quantity, timestamp, user ID, and instrument identifier (BitName).</li>
<li><strong>TradeDetails</strong>: A model capturing the intricate details of completed trades, including trade timestamps, executed price, buyer and seller details, and calculated brokerage.</li>
</ul>
<h3 id="concurrency-and-order-processing"><strong>Concurrency and Order Processing</strong>:<a hidden class="anchor" aria-hidden="true" href="#concurrency-and-order-processing">#</a></h3>
<ul>
<li>Incorporates Golang&rsquo;s goroutines and the <code>sync</code> package to achieve concurrent fetching of optimal buy and sell orders, maximizing throughput.</li>
<li>Executes multiple iterations of the order matching loop until either buy or sell orders are exhausted or the price criteria aren&rsquo;t met.</li>
</ul>
<h3 id="order-matching-logic"><strong>Order Matching Logic</strong>:<a hidden class="anchor" aria-hidden="true" href="#order-matching-logic">#</a></h3>
<ul>
<li>Uses price and timestamp as primary criteria for matching.</li>
<li><strong>Matching Scenarios</strong>:
<ol>
<li><strong>Equal Quantities</strong>: Both the buy and sell orders are removed from their respective books.</li>
<li><strong>Buy Quantity Exceeds</strong>: The sell order is culled, while the buy order undergoes a proportional reduction.</li>
<li><strong>Sell Quantity Exceeds</strong>: The buy order is culled, while the sell order undergoes a proportional reduction.</li>
</ol>
</li>
</ul>
<h3 id="database-operations-and-transaction-management"><strong>Database Operations and Transaction Management</strong>:<a hidden class="anchor" aria-hidden="true" href="#database-operations-and-transaction-management">#</a></h3>
<ul>
<li>The engine employs SQL transactions to ensure atomicity and data integrity.</li>
<li>On successful order match, trade details are persisted into a <code>MASTER_LEDGER</code>.</li>
<li>Efficient rollback mechanisms are in place to counteract any anomalies or discrepancies during transaction execution.</li>
</ul>
<h3 id="error-handling"><strong>Error Handling</strong>:<a hidden class="anchor" aria-hidden="true" href="#error-handling">#</a></h3>
<ul>
<li>Implements a robust error logging mechanism, providing insights into database connection issues, CRUD operations, and transactional discrepancies.</li>
</ul>
<h3 id="performance-metrics"><strong>Performance Metrics</strong>:<a hidden class="anchor" aria-hidden="true" href="#performance-metrics">#</a></h3>
<ul>
<li>At the culmination of its run, the engine delivers a performance report, showcasing the total elapsed time, rate of order processing (highlighting its capability of processing approximately 16,000 orders per second), and total iterations executed.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://shiva-m.com/tags/go/">Go</a></li>
      <li><a href="https://shiva-m.com/tags/mysql/">MySQL</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://shiva-m.com/">Shivam Arora</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
